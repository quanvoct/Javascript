<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiểm tra ký tự trong mảng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div class="card my-3 mx-auto" style="width: 30rem">
        <div class="card-body">
            <span>Các ký tự nhập phải thuộc trong các ký tự sau</span>
            <div id="baselist">A,T,C,G</div>
            <form id="currencyExchange">
                <label>Nhập chuỗi cần kiểm tra</label>
                <input type="text" class="form-control" id="sequence" />
                <span class="text-danger pt-5" id="output"></span>
            </form>
        </div>
    </div>
    <script>
        function validateInputArray(input, list) {
            /*---------------------------------
            Hàm kiểm tra từng ký tự trong chuỗi nhập vào có trong danh sách cho sẵn không
            -----------------------------------*/
            input = input.toUpperCase(); //Viết hoa chuỗi input lên
            list = list.toUpperCase(); //Viết hoa chuỗi list lên
            let inputArr = input.split("");
            let listArr = list.split(",");
            console.log(inputArr + ' và '+ listArr);
            let result;
            let vitri = []; 
            for (let i = 0; i < inputArr.length; i++) {
                let check = false; 
                for (let j = 0; j < listArr.length; j++) {
                    if (inputArr[i] == listArr[j]) {
                        check = true;
                    }
                }
                if (check == false) {
                    vitri.push(i);
                }
            }
            if (vitri.length > 0) {
                let text = 'Chuỗi không hợp lệ tại vị trí: ';
                text += vitri.join(', ');
                result = text;
            } else {
                result = '';
            }
            return result;
        }
        
        var sequence = document.getElementById('sequence');
        var baselist = document.getElementById('baselist');
        var output = document.getElementById('output');
        sequence.addEventListener('keyup', function () { /* Sau mỗi lần keyUp thì sẽ kiểm tra chuỗi 1 lần*/
            if (sequence.value != '') { //Nếu giá trị của chuỗi rỗng, trả về output cũng là rỗng
                str = sequence.value;
                list = baselist.innerText;
                output.innerHTML = validateInputArray(str, list);
            } else { //Ngược lại thì kiểm tra từng ký tự trong chuỗi có xuất hiện trong danh sách đã cho không
                output.innerHTML = '';
            }
        });
        
    </script>
</body>

</html>